/*DROP DATABASE tutorial_crud;*/
CREATE DATABASE tutorial_crud;

use tutorial_crud;

CREATE TABLE alumnos (
  nombre VARCHAR(30) NOT NULL,
  apellido VARCHAR(30) NOT NULL,
  email VARCHAR(50) NOT NULL,
  cced INT(15) NOT NULL PRIMARY KEY,
  praca VARCHAR(30) NOT NULL,
  created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
  updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);

CREATE TABLE asignatura (
  id INT(11) AUTO_INCREMENT PRIMARY KEY,
  nombre VARCHAR(30) NOT NULL,
  salon VARCHAR(15) NOT NULL,
  horario VARCHAR(15) NOT NULL,
  idprofe INT(10) NOT NULL,

  created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
  updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);


CREATE TABLE profesores (
  id INT(11) UNSIGNED AUTO_INCREMENT PRIMARY KEY,
  nombre VARCHAR(30) NOT NULL,
  email VARCHAR(50) NOT NULL,
  telefono VARCHAR(30) NOT NULL,
  
  created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
  updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);

CREATE TABLE clases (
  id INT(11) UNSIGNED AUTO_INCREMENT PRIMARY KEY,
  idalumno INT(15) NOT NULL,
  idasigna INT(11) NOT NULL,

  FOREIGN KEY (idalumno) REFERENCES alumnos(cced),
  FOREIGN KEY (idasigna) REFERENCES asignatura(id),

  created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
  updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);